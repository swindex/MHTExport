/**
 * Created by Admin on 01.09.14.
 */
function ref_82deg_FHS(){
    var xml='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><data-set xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><capscrew><size>Screw Size</size><dec_size>Decimal Size (in)</dec_size><hex_size>Hex Size</hex_size><spline_size>Spline Size</spline_size><head_dia>Head Diameter</head_dia><head_height>Head Height</head_height><csink_dia>Countersink Diameter</csink_dia><csink_depth>Countersink Depth</csink_depth><hole_norm>Clearance Drill Norm. Fit</hole_norm><hole_close>Clearance Drill Close Fit</hole_close></capscrew><capscrew><size>#0</size><dec_size>0.06</dec_size><hex_size>0.035</hex_size><spline_size>0.048</spline_size><head_dia>0.117</head_dia><head_height>0.044</head_height><csink_dia>0.138</csink_dia><csink_depth>0.046</csink_depth><hole_norm>0.073</hole_norm><hole_close>0.067</hole_close></capscrew><capscrew><size>#1</size><dec_size>0.073</dec_size><hex_size>0.05</hex_size><spline_size>0.06</spline_size><head_dia>0.143</head_dia><head_height>0.054</head_height><csink_dia>0.168</csink_dia><csink_depth>0.057</csink_depth><hole_norm>0.089</hole_norm><hole_close>0.081</hole_close></capscrew><capscrew><size>#2</size><dec_size>0.086</dec_size><hex_size>0.05</hex_size><spline_size>0.06</spline_size><head_dia>0.168</head_dia><head_height>0.064</head_height><csink_dia>0.197</csink_dia><csink_depth>0.066</csink_depth><hole_norm>0.106</hole_norm><hole_close>0.096</hole_close></capscrew><capscrew><size>#3</size><dec_size>0.099</dec_size><hex_size>1⁄16</hex_size><spline_size>0.072</spline_size><head_dia>0.193</head_dia><head_height>0.073</head_height><csink_dia>0.226</csink_dia><csink_depth>0.076</csink_depth><hole_norm>0.12</hole_norm><hole_close>0.11</hole_close></capscrew><capscrew><size>#4</size><dec_size>0.112</dec_size><hex_size>1⁄16</hex_size><spline_size>0.072</spline_size><head_dia>0.218</head_dia><head_height>0.083</head_height><csink_dia>0.255</csink_dia><csink_depth>0.085</csink_depth><hole_norm>0.136</hole_norm><hole_close>0.1285</hole_close></capscrew><capscrew><size>#5</size><dec_size>0.125</dec_size><hex_size>5⁄64</hex_size><spline_size>0.096</spline_size><head_dia>0.24</head_dia><head_height>0.09</head_height><csink_dia>0.281</csink_dia><csink_depth>0.093</csink_depth><hole_norm>0.154</hole_norm><hole_close>0.136</hole_close></capscrew><capscrew><size>#6</size><dec_size>0.138</dec_size><hex_size>5⁄64</hex_size><spline_size>0.096</spline_size><head_dia>0.263</head_dia><head_height>0.097</head_height><csink_dia>0.307</csink_dia><csink_depth>0.101</csink_depth><hole_norm>0.17</hole_norm><hole_close>0.1495</hole_close></capscrew><capscrew><size>#8</size><dec_size>0.164</dec_size><hex_size>3⁄32</hex_size><spline_size>0.111</spline_size><head_dia>0.311</head_dia><head_height>0.112</head_height><csink_dia>0.359</csink_dia><csink_depth>0.116</csink_depth><hole_norm>0.194</hole_norm><hole_close>0.177</hole_close></capscrew><capscrew><size>#10</size><dec_size>0.19</dec_size><hex_size>1⁄8</hex_size><spline_size>0.145</spline_size><head_dia>0.359</head_dia><head_height>0.127</head_height><csink_dia>0.411</csink_dia><csink_depth>0.132</csink_depth><hole_norm>0.221</hole_norm><hole_close>0.201</hole_close></capscrew><capscrew><size>1⁄4</size><dec_size>0.25</dec_size><hex_size>5⁄32</hex_size><spline_size>0.183</spline_size><head_dia>0.48</head_dia><head_height>0.161</head_height><csink_dia>0.531</csink_dia><csink_depth>0.167</csink_depth><hole_norm>0.281</hole_norm><hole_close>0.266</hole_close></capscrew><capscrew><size>5⁄16</size><dec_size>0.3125</dec_size><hex_size>3⁄16</hex_size><spline_size>0.216</spline_size><head_dia>0.6</head_dia><head_height>0.198</head_height><csink_dia>0.656</csink_dia><csink_depth>0.204</csink_depth><hole_norm>0.3438</hole_norm><hole_close>0.328</hole_close></capscrew><capscrew><size>3⁄8</size><dec_size>0.375</dec_size><hex_size>7⁄32</hex_size><spline_size>0.251</spline_size><head_dia>0.72</head_dia><head_height>0.234</head_height><csink_dia>0.781</csink_dia><csink_depth>0.242</csink_depth><hole_norm>0.4063</hole_norm><hole_close>0.39</hole_close></capscrew><capscrew><size>7⁄16</size><dec_size>0.4375</dec_size><hex_size>1⁄4</hex_size><spline_size>0.291</spline_size><head_dia>0.781</head_dia><head_height>0.234</head_height><csink_dia>0.844</csink_dia><csink_depth>0.242</csink_depth><hole_norm>0.4687</hole_norm><hole_close>0.453</hole_close></capscrew><capscrew><size>1⁄2</size><dec_size>0.5</dec_size><hex_size>5⁄16</hex_size><spline_size>0.372</spline_size><head_dia>0.872</head_dia><head_height>0.251</head_height><csink_dia>0.938</csink_dia><csink_depth>0.261</csink_depth><hole_norm>0.531</hole_norm><hole_close>0.515</hole_close></capscrew><capscrew><size>5⁄8</size><dec_size>0.625</dec_size><hex_size>3⁄8</hex_size><spline_size>0.454</spline_size><head_dia>1.112</head_dia><head_height>0.324</head_height><csink_dia>1.188</csink_dia><csink_depth>0.355</csink_depth><hole_norm>0.6563</hole_norm><hole_close>0.6406</hole_close></capscrew><capscrew><size>3⁄4</size><dec_size>0.75</dec_size><hex_size>1⁄2</hex_size><spline_size>0.454</spline_size><head_dia>1.355</head_dia><head_height>0.396</head_height><csink_dia>1.438</csink_dia><csink_depth>0.41</csink_depth><hole_norm>0.7812</hole_norm><hole_close>0.7656</hole_close></capscrew><capscrew><size>7⁄8</size><dec_size>0.875</dec_size><hex_size>9⁄16</hex_size><spline_size>…</spline_size><head_dia>1.604</head_dia><head_height>0.468</head_height><csink_dia>1.688</csink_dia><csink_depth>0.484</csink_depth><hole_norm>0.9063</hole_norm><hole_close>0.8906</hole_close></capscrew><capscrew><size>1</size><dec_size>1</dec_size><hex_size>5⁄8</hex_size><spline_size>…</spline_size><head_dia>1.841</head_dia><head_height>0.54</head_height><csink_dia>1.938</csink_dia><csink_depth>0.559</csink_depth><hole_norm>1.0313</hole_norm><hole_close>1.0156</hole_close></capscrew><capscrew><size>1-1⁄8</size><dec_size>1.125</dec_size><hex_size>3⁄4</hex_size><spline_size>…</spline_size><head_dia>2.079</head_dia><head_height>0.611</head_height><csink_dia>2.188</csink_dia><csink_depth>0.633</csink_depth><hole_norm>1.1719</hole_norm><hole_close>1.156</hole_close></capscrew><capscrew><size>1-1⁄4</size><dec_size>1.25</dec_size><hex_size>7⁄8</hex_size><spline_size>…</spline_size><head_dia>2.316</head_dia><head_height>0.683</head_height><csink_dia>2.438</csink_dia><csink_depth>0.708</csink_depth><hole_norm>1.3125</hole_norm><hole_close>1.281</hole_close></capscrew><capscrew><size>1-3⁄8</size><dec_size>1.375</dec_size><hex_size>7⁄8</hex_size><spline_size>…</spline_size><head_dia>2.553</head_dia><head_height>0.755</head_height><csink_dia>2.688</csink_dia><csink_depth>0.782</csink_depth><hole_norm>1.4062</hole_norm><hole_close>1.39</hole_close></capscrew><capscrew><size>1-1⁄2</size><dec_size>1.5</dec_size><hex_size>1</hex_size><spline_size>…</spline_size><head_dia>2.791</head_dia><head_height>0.827</head_height><csink_dia>2.938</csink_dia><csink_depth>0.857</csink_depth><hole_norm>1.5312</hole_norm><hole_close>1.515</hole_close></capscrew></data-set>';
    var dom={};
    var fields={};
    var data={};
    var prev_selectedrow={};
    data={
        rnd:0,
        n_size:5,
        canvas_width:600,
        canvas_height:200,
        canvas_x:200,
        canvas_y:200,
        scale_:1,
        scale:1,
        title:"82º Flat Head Screw",
        size:"1/4",
        dec_size:0.25,
        hex_size:"3/16",
        spline_size:"1/16",
        head_dia:0.375,
        head_height:0.25,
        csink_depth:0.25,
        csink_dia:0.278,
        hole_close:0.255,
        hole_norm:0.281,
        show_locations:1};

this.init=init;
    function init(fields_){
        fields=fields_

        bhc = new jsGraphics(fields.canvas);
        drw = new Drawing(bhc);
        dom=XML_Get_Table(xml,"capscrew");
        draw_Table(fields.table,dom,undefined,undefined,true);

       select(1);

    }
    function select(index){

        data.size=dom[index]['size'];
        data.size=dom[index]['size'];
        data.dec_size=dom[index]['dec_size'];
        data.hex_size=dom[index]['hex_size'];
        data.spline_size=dom[index]['spline_size'];
        data.head_dia=dom[index]['head_dia'];
        data.head_height=dom[index]['head_height'];
        data.csink_depth=dom[index]['csink_depth'];
        data.csink_dia=dom[index]['csink_dia'];
        data.hole_close=dom[index]['hole_close'];
        data.hole_norm=dom[index]['hole_norm'];

        //this.className="selected";
      /*prev_selectedrow=this;*/
         //alert(dTable[row]['size']);
        draw();
    }
    function draw(){

        editStyleById(fields.canvas,"width",data.canvas_width+"px");
        editStyleById(fields.canvas,"height",data.canvas_height+"px");

        bhc.setOrigin(data.canvas_width/2-170-50 ,data.canvas_height/2,1,-1,1);
        bhc.clear();
        bhc.setColor("#000000"); // black

        bhc.drawString(data.size+ "  "+data.title,15,85);


        bhc.setStroke(Stroke.DOTTED);

        bhc.drawLine(-10, 0, 60+130, 0); // co-ordinates of line 1
        bhc.setStroke(1);
        //bhc.drawRect( 0,-50,35,100);//head
        bhc.drawLine(0, -50, 35, -25);
        bhc.drawLine(0, 50, 35, 25);
        bhc.drawLine(0, 50, 0, -50);


        bhc.drawRect( 35,-25,120,50);//body

        bhc.setColor("#0000ff"); // blue
        drw.dim2point(0,-50,0,50,20);
        bhc.drawString(data.head_dia,-65,5);



        drw.dim2point(120,-25,120,25,20);
        bhc.drawString(data.dec_size,115,15);

        drw.dim2point(35,-50,0,-50,20);
        bhc.drawString(data.head_height,5,-75);
        bhc.paint();

        //draw c-bore
        bhc.setOrigin(data.canvas_width/2+60 ,data.canvas_height/2,1,-1,1);

        //bhc.clear();
        bhc.setColor("#777777"); // gray
        bhc.fillRect( 0,-80,36+120,160);//fill

        bhc.setColor("white"); // white
       // bhc.fillRect( 0,-40,60,80);//head
        bhc.fillRect( 35,-25,120,50);//body




        var x=[0,35,35,0];
        var y=[-50,-25,25,50];

        bhc.fillPolygon(x,y);


        bhc.setColor("#000000"); // black
        bhc.setStroke(1);
        bhc.drawPolygon(x,y);

//        bhc.drawRect( 0,-40,60,80);//head

        bhc.drawRect( 35,-25,120,50);//body

        bhc.setStroke(Stroke.DOTTED);
        bhc.drawLine(-10, 0, 60+130, 0); // co-ordinates of line 1

        bhc.setStroke(1);

        bhc.setColor("#0000ff"); // blue
        drw.dim2point(0,-50,0,50,20);
        bhc.drawString(data.csink_dia,-65,5);

        drw.dim2point(120,-25,120,25,20);
        bhc.drawString(data.hole_close,115,15);
        bhc.drawString(data.hole_norm,115,0);

        drw.dim2point(0,-15,35,-15,20);
        bhc.drawString(data.csink_depth,0,0);



        bhc.setStroke(1);

        bhc.setColor("#0000ff"); // blue

        bhc.paint();
    }
    function draw_Table(target_id,dTable,headers_name_title_style,selected_row,firstrow_is_header){

        var c,r,t
        t = document.createElement('table');
        t.border=0;
        t.cellSpacing=1;
        t.cellPadding=3;

        t.className="reference_table_body";
        var n=0;
        var i=0;
        var ii=0;
        var columns =[];
        if (typeof headers_name_title_style !="undefined"){
            r = t.insertRow(0);
            r.className="header"
            for (var header in headers_name_title_style){
                if (headers_name_title_style[header] instanceof Array){
                    //if header element is an array then we have a pair of key/text/maybe style
                    //only output Text
                    c=r.insertCell(n);
                    //add name to the columns array
                    columns[n]=headers_name_title_style[header][0];
                    //add title to header row
                    c.innerHTML=headers_name_title_style[header][1];
                    //add style to cell
                    if (typeof headers_name_title_style[header][2] !="undefined"){
                        c.style=headers_name_title_style[header][2];
                    }
                    n++;

                }else{
                    //if it is not an array then simply put that text into the heder row
                    c=r.insertCell(n);
                    c.innerHTML=headers_name_title_style[header];
                    n++;
                }
            }
            i=1;
        }else{
            //Okay we do not have any headers, so we create a header array with unique values
            r = t.insertRow(0);
            r.className="header"
                for (var row in dTable){
                for (var column in dTable[row]){
                    if (!inArray(column,columns)){
                        columns[ii]=column;
                        c=r.insertCell(ii);
                        if (firstrow_is_header != true){
                            c.innerHTML=column;

                        }else{

                            c.innerHTML=dTable[0][columns[ii]];
                        }
                        ii++;
                    }
                }
                break;
            }
            i=1;
        }
        ii=0;
        var n=0;
        for (var row in dTable){
            if (firstrow_is_header == true && n==0){
                //nothing just skip first row


            }else{
                r = t.insertRow(i);
                if (is_IE)
                    r.setAttribute("value",row);
                else
                    r.value=row;

                r.onclick=function (e) {
                    if (is_IE){
                        var r=this.getAttribute("value");
                        this.setAttribute("oldClass",this.className);
                        if (prev_selectedrow.className!= undefined){
                            prev_selectedrow.className=prev_selectedrow.getAttribute("oldClass");
                        }

                    }else{
                        var r=this.value;
                        this.oldClass=this.className;
                        if (prev_selectedrow.className!= undefined){
                            prev_selectedrow.className=prev_selectedrow.oldClass;
                        }

                    }
                        data.size=dTable[r]['size'];
                        data.size=dTable[r]['size'];
                        data.dec_size=dTable[r]['dec_size'];
                        data.hex_size=dTable[r]['hex_size'];
                        data.spline_size=dTable[r]['spline_size'];
                        data.head_dia=dTable[r]['head_dia'];
                        data.head_height=dTable[r]['head_height'];
                        data.csink_depth=dTable[r]['csink_depth'];
                        data.csink_dia=dTable[r]['csink_dia'];
                        data.hole_close=dTable[r]['hole_close'];
                        data.hole_norm=dTable[r]['hole_norm'];
                        this.className="selected";
                        prev_selectedrow=this;


                    //alert(dTable[row]['size']);
                        draw();
                }
                
                
                if (isOdd(i))r.className="odd";
                if (selected_row==i)r.className="selected";
                for (var column in columns){
                    c=r.insertCell(ii);
                    if (typeof dTable[row][columns[column]]!= "undefined"){
                        c.innerHTML=dTable[row][columns[column]];
                    }else{
                        c.innerHTML="";
                    }

                    ii++;
                }
                ii=0;
                i++;
            }
            n++;
        }
        document.getElementById(target_id).innerHTML="";
        document.getElementById(target_id).appendChild(t);

    }
}